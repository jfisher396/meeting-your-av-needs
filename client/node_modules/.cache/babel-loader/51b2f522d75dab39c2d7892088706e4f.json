{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\jfish\\\\code\\\\groupwork\\\\project 3\\\\av-rental\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\jfish\\\\code\\\\groupwork\\\\project 3\\\\av-rental\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\jfish\\\\code\\\\groupwork\\\\project 3\\\\av-rental\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\jfish\\\\code\\\\groupwork\\\\project 3\\\\av-rental\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import API from\"../utils/API\";var OrderTable=/*#__PURE__*/function(_Component){_inherits(OrderTable,_Component);var _super=_createSuper(OrderTable);function OrderTable(){var _this;_classCallCheck(this,OrderTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={orders:[],fetching:true};_this.handleButtonClick=function(event){event.preventDefault();// console.log(this.state.orders)\n//need an if statement here to confirm items have been selected\nif(_this.state.orders){API.saveOrder({items:_this.state.orders}).then(function(){return _this.props.history.push(\"/customer-info\");}).catch(function(err){return console.log(err);});}else{alert('Please select at least one item');}};return _this;}_createClass(OrderTable,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.ordering!==this.props.ordering){this.setState({orders:this.props.ordering,fetching:false});// console.log(this.props.ordering)\n}}},{key:\"componentDidMount\",value:function componentDidMount(){// console.log(this.props.ordering.flat());\n}},{key:\"render\",value:function render(){// console.log(this.state.orders.flat());\nvar _this$state=this.state,orders=_this$state.orders,fetching=_this$state.fetching;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Your items:\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,!fetching&&orders.flat().map(function(item,index){return/*#__PURE__*/React.createElement(\"p\",{id:item._id,key:\"\".concat(item._id,\"_\").concat(index)},item.proj&&item.proj||item.screen&&item.screen||item.comp&&item.comp);}))))),/*#__PURE__*/React.createElement(Link,{to:\"/customer-info\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleButtonClick,type:\"button\",className:\"primary button\"},\"Confirm order and go to customer info screen\")));}}]);return OrderTable;}(Component);export{OrderTable as default};","map":{"version":3,"sources":["C:/Users/jfish/code/groupwork/project 3/av-rental/client/src/components/OrderTable.js"],"names":["React","Component","Link","API","OrderTable","state","orders","fetching","handleButtonClick","event","preventDefault","saveOrder","items","then","props","history","push","catch","err","console","log","alert","prevProps","ordering","setState","flat","map","item","index","_id","proj","screen","comp"],"mappings":"4tBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,C,GAEqBC,CAAAA,U,2UACnBC,K,CAAQ,CACNC,MAAM,CAAE,EADF,CAENC,QAAQ,CAAE,IAFJ,C,OAoBRC,iB,CAAoB,SAACC,KAAD,CAAW,CAC7BA,KAAK,CAACC,cAAN,GACA;AACA;AACA,GAAI,MAAKL,KAAL,CAAWC,MAAf,CAAuB,CACrBH,GAAG,CAACQ,SAAJ,CAAc,CACZC,KAAK,CAAE,MAAKP,KAAL,CAAWC,MADN,CAAd,EAGGO,IAHH,CAGQ,iBAAM,OAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,gBAAxB,CAAN,EAHR,EAIGC,KAJH,CAIS,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAJT,EAKD,CAND,IAMO,CACLG,KAAK,CAAC,iCAAD,CAAL,CACD,CACF,C,oGA5BkBC,S,CAAW,CAE5B,GAAIA,SAAS,CAACC,QAAV,GAAuB,KAAKT,KAAL,CAAWS,QAAtC,CAAgD,CAC9C,KAAKC,QAAL,CAAc,CACZlB,MAAM,CAAE,KAAKQ,KAAL,CAAWS,QADP,CAEZhB,QAAQ,CAAE,KAFE,CAAd,EAIA;AACD,CACF,C,6DAEmB,CAClB;AACD,C,uCAiBQ,CACP;AADO,gBAEsB,KAAKF,KAF3B,CAECC,MAFD,aAECA,MAFD,CAESC,QAFT,aAESA,QAFT,CAGP,mBACE,4CACE,6BAAO,SAAS,CAAC,OAAjB,eACE,8CACE,2CACE,0BAAI,KAAK,CAAC,KAAV,gBADF,CADF,CADF,cAME,8CACE,2CACE,8BACG,CAACA,QAAD,EACCD,MAAM,CAACmB,IAAP,GAAcC,GAAd,CAAkB,SAACC,IAAD,CAAOC,KAAP,CAAiB,CACjC,mBACE,yBAAG,EAAE,CAAED,IAAI,CAACE,GAAZ,CAAiB,GAAG,WAAKF,IAAI,CAACE,GAAV,aAAiBD,KAAjB,CAApB,EACID,IAAI,CAACG,IAAL,EAAaH,IAAI,CAACG,IAAnB,EACEH,IAAI,CAACI,MAAL,EAAeJ,IAAI,CAACI,MADtB,EAEEJ,IAAI,CAACK,IAAL,EAAaL,IAAI,CAACK,IAHvB,CADF,CAOD,CARD,CAFJ,CADF,CADF,CANF,CADF,cAwBE,oBAAC,IAAD,EAAM,EAAE,CAAC,gBAAT,eACE,8BACE,OAAO,CAAE,KAAKxB,iBADhB,CAEE,IAAI,CAAC,QAFP,CAGE,SAAS,CAAC,gBAHZ,iDADF,CAxBF,CADF,CAoCD,C,wBA3EqCP,S,SAAnBG,U","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport API from \"../utils/API\";\r\n\r\nexport default class OrderTable extends Component {\r\n  state = {\r\n    orders: [],\r\n    fetching: true,\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n\r\n    if (prevProps.ordering !== this.props.ordering) {\r\n      this.setState({\r\n        orders: this.props.ordering,\r\n        fetching: false,\r\n      });\r\n      // console.log(this.props.ordering)\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    // console.log(this.props.ordering.flat());\r\n  }\r\n\r\n  handleButtonClick = (event) => {\r\n    event.preventDefault();\r\n    // console.log(this.state.orders)\r\n    //need an if statement here to confirm items have been selected\r\n    if (this.state.orders) {\r\n      API.saveOrder({\r\n        items: this.state.orders,\r\n      })\r\n        .then(() => this.props.history.push(\"/customer-info\"))\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      alert('Please select at least one item')\r\n    }\r\n  };\r\n\r\n  render() {\r\n    // console.log(this.state.orders.flat());\r\n    const { orders, fetching } = this.state;\r\n    return (\r\n      <div>\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\">Your items:</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                {!fetching &&\r\n                  orders.flat().map((item, index) => {\r\n                    return (\r\n                      <p id={item._id} key={`${item._id}_${index}`}>\r\n                        {(item.proj && item.proj) ||\r\n                          (item.screen && item.screen) ||\r\n                          (item.comp && item.comp)}\r\n                      </p>\r\n                    );\r\n                  })}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <Link to=\"/customer-info\">\r\n          <button\r\n            onClick={this.handleButtonClick}\r\n            type=\"button\"\r\n            className=\"primary button\"\r\n          >\r\n            Confirm order and go to customer info screen\r\n          </button>\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}